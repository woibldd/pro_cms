(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{379:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFaSURBVHgB7ZiNTcMwEIUvFQN0BI9QNggTMEJHgA0Im3QDYILSCdoNwgawQXiHbCm4ieNz7DiV/ElPTc9q9ck/pyREhULBn67rFPLd5aNFdn2njeXYIFvKh0Ke+oUNrZw7x9gJOdAy7JF6aMAl2FZVdaAFwL6rx8ZueokH0adMIRfM8BclxnsGdQs64vKMvCHcEl4oMZIlbuh6Izeu/RMDieDjSH1PCUl2SDCz2xizKxH8GKmf7II+SC1yxPWZZSkQieAzcrFqr3av1HJ8mIzU3/dQSe82A5EffNzrZVPIu6655MiSfLB/E02wJ/o5VHfIGYIkoxwSDzmDeLlnCwrkDCLJWYIBcgZvyWDBGXIGL8kgwQhyhsn/Cb2biSFn2OkMIprBBHKTSG63FpdjvARzyTGTgjnlGKdgbjnGJagosxzjajM1rYDVP3b+g/ecfoGTC35xpahQKPjzC6Ozn3JRmGUSAAAAAElFTkSuQmCC"},380:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFESURBVHgB7ZbRTQMxDIb/IAZgBSaADThGYAJgEsQITFBGYANggh4bsEG7QWpLeYjS5M6Ok1Mf8klWpF7sfk3qXIDBYKDHe/9GcfAydpn8G4q9V6IR1LAr1FBL5upcoRPOuSMNjxQzDFwL5nxS/C48/y89YElaGJb8prhHK5KVf4ER6XbncrttcUzY7idUsIkgryANX6igu2CQ+6G4QwVdBQtyfxS3sHR3iyYJjTEnteYgnW0cTXGT4JpcMm+/qaBULicJKbWCWrlUElJqBGvl4nxI0Qpa5ZZoeczE/yE+SqbwBjEhuSysklwKHBrJMU0EmUgSreSYZoKMVox+0ETDc5T/Kk1Ud3ENXDv+otycTW4zFoaglSFo5eIFJefgg1fchJRMaxNc7kPf0WgJOqjPfEpb3OxVZaUk+IFt4QV5x2Aw0HMCShN+nd/b/wkAAAAASUVORK5CYII="},386:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={created:function(){},methods:{showLoading:function(t){this.Toast=this.$toast.loading({duration:0,forbidClick:!0,message:t||""})},hideLoading:function(){this.Toast&&this.Toast.clear()}}}},388:function(t,e,n){t.exports=n.p+"img/poster_logo@2.53db9a6.png"},389:function(t,e,n){var r=n(413);(r="string"==typeof(r=r.__esModule?r.default:r)?[[t.i,r,""]]:r).locals&&(t.exports=r.locals),(0,n(110).default)("31f1d666",r,!0,{sourceMap:!1})},390:function(t,e,n){t.exports=n.p+"img/icon_close@2.730c7dc.png"},412:function(t,e,n){"use strict";n(389)},413:function(t,e,n){var r=n(109),a=n(239);n=n(390),r=r(!1),n=a(n);r.push([t.i,".qcodeModalwarpper[data-v-2d8dbd28] {\n  width: 100vw;\n  z-index: 100;\n}\n.qcodeModalwarpper.hidden[data-v-2d8dbd28] {\n  z-index: -10 !important;\n  opacity: 0;\n}\n.qcodeModalwarpper .canvasTmp[data-v-2d8dbd28] {\n  position: absolute;\n  z-index: -1;\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n.qcodeModalwarpper .close[data-v-2d8dbd28] {\n  position: absolute;\n  z-index: 1;\n  top: 0.69rem;\n  right: 0.69rem;\n  width: 0.75rem;\n  height: 0.75rem;\n  background: url("+n+") center center no-repeat;\n  background-size: 100% 100%;\n}\n.qcodeModalwarpper .postershow[data-v-2d8dbd28] {\n  width: 9.2rem;\n  height: 14.21rem;\n  max-height: calc(100vh - 3.07rem);\n  margin: 0.48rem auto 0;\n  position: relative;\n}\n.qcodeModalwarpper .postershow img[data-v-2d8dbd28] {\n  width: 100%;\n  height: 100%;\n}\n.qcodeModalwarpper .poster_wrapper[data-v-2d8dbd28] {\n  position: relative;\n  width: 9.2rem;\n  height: 14.24rem;\n  max-height: calc(100vh - 3.07rem);\n  margin: 0.48rem auto 0;\n  position: relative;\n}\n.qcodeModalwarpper .poster_wrapper .poster_bg[data-v-2d8dbd28] {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title[data-v-2d8dbd28] {\n  left: 0.43rem;\n  bottom: 0.59rem;\n  position: absolute;\n  font-weight: 500;\n  font-size: 0.32rem;\n  line-height: 0.48rem;\n  color: #ffffff;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title .logo[data-v-2d8dbd28] {\n  width: 2.4rem;\n  height: 0.64rem;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title .title[data-v-2d8dbd28] {\n  margin-top: 0.27rem;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title .content[data-v-2d8dbd28] {\n  width: 5.84rem;\n  word-break: break-all;\n  word-wrap: break-word;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title .content.en[data-v-2d8dbd28] {\n  line-height: 0.35rem;\n}\n.qcodeModalwarpper .poster_wrapper .poster_qrcode[data-v-2d8dbd28] {\n  position: absolute;\n  right: 0.48rem;\n  bottom: 0.53rem;\n  width: 2.13rem;\n  height: 2.13rem;\n  box-shadow: inset 0 0.03rem 0 rgba(255,255,255,0.4),inset 0 -0.03rem 0 rgba(255,255,255,0.15);\n  border-radius: 0.21rem;\n}\n.qcodeModalwarpper .footer[data-v-2d8dbd28] {\n  margin-top: 0.4rem;\n  display: flex;\n  justify-content: center;\n}\n.qcodeModalwarpper .footer .left[data-v-2d8dbd28] {\n  margin-right: 0.51rem;\n}\n.qcodeModalwarpper .footer .btn[data-v-2d8dbd28] {\n  display: flex;\n  width: 4.32rem;\n  height: 1.33rem;\n  font-size: 0.43rem;\n  background: linear-gradient(122.71deg, #5aebff 3.38%, #6d39ff 92.57%),#c4c4c4;\n  border-radius: 2.67rem;\n  font-weight: 600;\n  color: #ffffff;\n  justify-content: center;\n  align-items: center;\n}\n.qcodeModalwarpper .footer .btn img[data-v-2d8dbd28] {\n  width: 0.53rem;\n  height: 0.53rem;\n  margin-right: 0.16rem;\n}",""]),t.exports=r},483:function(t,e,n){"use strict";n.r(e);var a=n(14),r=(n(68),n(47),n(69),n(408)),o=n.n(r),i=n(386),s=(r=n(411),n.n(r)),d=n(165);r={name:"CrearePoster",mixins:[i.a],props:{locale:{default:"en"},zIndex:{default:100},isBitKeep:{default:!1},userInfo:{default:""},info:{default:function(){return{status:0,is_owner:0}}}},computed:{proxy_img:function(){return"/poster".concat("http://cdn.bitkeep.vip/u_b_4cca7310-5be4-11ec-bdbc-7722494dfa58.jpeg".replace("http://cdn.bitkeep.vip","").replace("https://cdn.bitkeep.vip",""))},codeText:function(){return location.href+"/detail?token="+this.userInfo}},data:function(){return{showModal:!1,qrcodeUrl:"",poster:{url:""},pedding:!1}},mounted:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.toDataURL(t.codeText,{errorCorrectionLevel:"H",quality:100}).catch((function(t){return""}));case 2:t.qrcodeUrl=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{init:function(){this.showModal=!0,this.pedding&&this.showLoading(this.$t("ActivityBlindbox.toast.Generating"))},createPoster:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pedding)return e.abrupt("return",t.showLoading(t.$t("ActivityBlindbox.toast.Generating")));e.next=2;break;case 2:if(t.showModal&&t.showLoading(t.$t("ActivityBlindbox.toast.Generating")),t.pedding=!0,t.poster.url="",n=t.$refs.poster,t.qrcodeUrl){e.next=12;break}return e.next=9,o.a.toDataURL(t.codeText).catch((function(t){return""}));case 9:return t.qrcodeUrl=e.sent,e.next=12,t.$nextTick();case 12:s()(n,{dpi:Object(d.a)(),width:n.offsetWidth-1,height:n.offsetHeight-1,scale:3,async:!0,scrollY:0,scrollX:0,allowTaint:!1}).then(function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.poster.url=n.toDataURL("image/jpeg"),e.next=3,t.$nextTick();case 3:t.pedding=!1,t.hideLoading();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.pedding=!1,t.$toast.fail(JSON.stringify(e))}));case 15:case"end":return e.stop()}}),e)})))()},shareImage:function(){BitKeepInvoke.shareUrl("",this.$t("ActivityBlindbox.shared.content"),location.href+"/detail?token="+this.userInfo,this.info.cover_image,console.log)},saveImage:function(){var t=this;this.poster.url?(this.showLoading(this.$t("ActivityBlindbox.toast.Saving")),BitKeepInvoke.saveImageFromBase64(this.poster.url,(function(e){t.hideLoading()}))):this.createPoster()}}},n(412),i=n(79),r=Object(i.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-overlay",{class:{qcodeModalwarpper:!0,hidden:!t.showModal},attrs:{show:!0}},[r("canvas",{ref:"qrcode",staticClass:"canvasTmp"}),t._v(" "),r("div",{staticClass:"overlayBox",on:{click:function(t){t.stopPropagation()}}},[r("span",{staticClass:"close",attrs:{name:"close"},on:{click:function(e){t.showModal=!1}}}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.poster.url,expression:"!poster.url"}],ref:"poster",staticClass:"poster_wrapper",attrs:{id:"poster"}},[r("img",{staticClass:"poster_bg",attrs:{src:t.proxy_img,alt:""},on:{load:t.createPoster}}),t._v(" "),r("div",{staticClass:"commany_title"},[r("img",{staticClass:"logo",attrs:{src:n(388),alt:""}}),t._v(" "),r("div",{class:((e={content:!0})[t.locale]=!0,e)},[r("div",[t._v("\n            "+t._s(t.$t("ActivityBlindbox.ActivityBlindboxDetail.ScanBlindBox"))+"\n          ")]),t._v(" "),r("div",[t._v("\n            "+t._s(t.$t("ActivityBlindbox.ActivityBlindboxDetail.DownloadBitkeep"))+"\n          ")])])]),t._v(" "),r("img",{staticClass:"poster_qrcode",attrs:{src:t.qrcodeUrl}})]),t._v(" "),t.poster.url?r("div",{staticClass:"postershow"},[r("img",{attrs:{src:t.poster.url}})]):t._e(),t._v(" "),r("div",{staticClass:"footer"},[t.isBitKeep||t.pedding?r("div",{staticClass:"btn left",on:{click:t.saveImage}},[r("img",{attrs:{src:n(379),alt:""}}),t._v(" "),r("span",[t._v(t._s(t.$t("ActivityBlindbox.button.savePicture")))])]):r("a",{staticClass:"btn left",attrs:{href:t.poster.url,download:(new Date).getTime()+".jpeg"}},[r("img",{attrs:{src:n(379),alt:""}}),t._v(" "),r("span",[t._v(t._s(t.$t("blindboxInvite.savePicture")))])]),t._v(" "),t.isBitKeep?r("div",{staticClass:"btn",on:{click:t.shareImage}},[r("img",{attrs:{src:n(380),alt:""}}),t._v(" "),r("span",[t._v(t._s(t.$t("blindboxInvite.ShareLink")))])]):r("div",{staticClass:"btn"},[r("img",{attrs:{src:n(380),alt:""}}),t._v(" "),r("span",[t._v(t._s(t.$t("blindboxInvite.ShareLink")))])])])])])}),[],!1,null,"2d8dbd28",null);e.default=r.exports}}]);