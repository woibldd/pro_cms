(window.webpackJsonp=window.webpackJsonp||[]).push([[4,11,14],{404:function(t,e,i){var n=i(7),r=i(175);i=i(112);n({target:"Array",proto:!0},{fill:r}),i("fill")},408:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));e=i(61),e=i(43),e=i(60),e=i(84),e=i(51),e=i(85);var s=i(4),n=i(38);e=i(18),e=i(255),e=i(59),e=i(58),i=i(94);function r(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)),n}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t){return((0<arguments.length&&void 0!==t?t:"")||"").toLowerCase()}var c={computed:o(o({},Object(i.b)(["local"])),{},{locale:function(){return this.local.locale},isBitKeep:function(){return this.local.UA.isBitKeep}}),created:function(){},methods:{addCoin:function(t,i,e){var n=this;return Object(s.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.isBitKeep){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,n._addCoin(t,i,e);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2);case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()},_addCoin:function(t,e,n){return new Promise((function(i){window.BitKeepInvoke.addCoin(t,e,n,(function(t,e){return t?i(!1):e?i(!0):void i(!1)}))}))},_isCoinHas:function(t,e){return new Promise((function(i){window.BitKeepInvoke.getCoins((function(n,r){return n?i(!1):r?(r=r.find((function(n){return"".concat(a(n.chain),"_").concat(a(n.contract))=="".concat(a(t),"_").concat(a(e))})),i(r)):void i(!1)}))}))},showLoading:function(t){this.Toast=this.$toast.loading({duration:0,forbidClick:!0,message:t||""})},hideLoading:function(){this.Toast&&this.Toast.clear()}}}},409:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFaSURBVHgB7ZiNTcMwEIUvFQN0BI9QNggTMEJHgA0Im3QDYILSCdoNwgawQXiHbCm4ieNz7DiV/ElPTc9q9ck/pyREhULBn67rFPLd5aNFdn2njeXYIFvKh0Ke+oUNrZw7x9gJOdAy7JF6aMAl2FZVdaAFwL6rx8ZueokH0adMIRfM8BclxnsGdQs64vKMvCHcEl4oMZIlbuh6Izeu/RMDieDjSH1PCUl2SDCz2xizKxH8GKmf7II+SC1yxPWZZSkQieAzcrFqr3av1HJ8mIzU3/dQSe82A5EffNzrZVPIu6655MiSfLB/E02wJ/o5VHfIGYIkoxwSDzmDeLlnCwrkDCLJWYIBcgZvyWDBGXIGL8kgwQhyhsn/Cb2biSFn2OkMIprBBHKTSG63FpdjvARzyTGTgjnlGKdgbjnGJagosxzjajM1rYDVP3b+g/ecfoGTC35xpahQKPjzC6Ozn3JRmGUSAAAAAElFTkSuQmCC"},410:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFESURBVHgB7ZbRTQMxDIb/IAZgBSaADThGYAJgEsQITFBGYANggh4bsEG7QWpLeYjS5M6Ok1Mf8klWpF7sfk3qXIDBYKDHe/9GcfAydpn8G4q9V6IR1LAr1FBL5upcoRPOuSMNjxQzDFwL5nxS/C48/y89YElaGJb8prhHK5KVf4ER6XbncrttcUzY7idUsIkgryANX6igu2CQ+6G4QwVdBQtyfxS3sHR3iyYJjTEnteYgnW0cTXGT4JpcMm+/qaBULicJKbWCWrlUElJqBGvl4nxI0Qpa5ZZoeczE/yE+SqbwBjEhuSysklwKHBrJMU0EmUgSreSYZoKMVox+0ETDc5T/Kk1Ud3ENXDv+otycTW4zFoaglSFo5eIFJefgg1fchJRMaxNc7kPf0WgJOqjPfEpb3OxVZaUk+IFt4QV5x2Aw0HMCShN+nd/b/wkAAAAASUVORK5CYII="},412:function(t,e,i){},573:function(t,e,i){"use strict";i(412)},574:function(t,e,i){},579:function(t,e,i){"use strict";i.r(e),i(254),i(50),i(74),i(75),i(174),i(404);var n=1e3,r=6e4,s=36e5,o=864e5,a={all:/\{(dd|hh|mm|ss|ms){1}\}/gi,ms:/\{(ms){1}\}/gi,ss:/\{(ss){1}\}/gi,mm:/\{(mm){1}\}/gi,hh:/\{(hh){1}\}/gi,dd:/\{(dd){1}\}/gi,mn:/\{(mn){1}\}/gi,yy:/\{(yy){1}\}/gi},c={name:"cuntdown",props:{hidden:{type:Boolean,default:!1},format:{type:String,default:"{yy}年{mn}月{dd}天{hh}小时{mm}分钟{ss}秒{ms}毫秒"},startTime:{type:Number||String,default:(new Date).getTime()},endTime:{type:Number||String,default:(new Date).getTime()}},data:function(){return{timer:null,stepTime:0}},watch:{stepTime:function(t){var e={ms:this.ms,ss:this.ss,mm:this.mm,hh:this.hh,dd:this.dd};if(t<=0)return this.$emit("end",e);this.$emit("change",e)},startTime:function(){this.stepTime=0,this.init()},endTime:function(){this.stepTime=0,this.init()}},computed:{options_show:function(){return{ms:a.ms.test(this.format),ss:a.ss.test(this.format),mm:a.mm.test(this.format),hh:a.hh.test(this.format),dd:a.dd.test(this.format),mn:a.mn.test(this.format),yy:a.yy.test(this.format)}},ms:function(){return Math.floor(this.stepTime%n)},ss:function(){return this.options_show.mm?Math.floor(this.stepTime%r/n):Math.floor(this.stepTime/n)},mm:function(){return this.options_show.hh?Math.floor(this.stepTime%s/r):Math.floor(this.stepTime/r)},hh:function(){return this.options_show.dd?Math.floor(this.stepTime%o/s):Math.floor(this.stepTime/s)},dd:function(){return this.options_show.mn?this.diff.day:Math.floor(this.stepTime/o)},mn:function(){var t=0<this.diff.year?this.diff.year:0,e=0<this.diff.month?this.diff.month:0;return this.options_show.yy?e:12*t+e-1},yy:function(){return 0<this.diff.year?this.diff.year:0},step_times:function(){return this.options_show.ms?100:1e3},pareStr:function(){return this.format.replace(a.ms,this.zero(this.ms,4)).replace(a.ss,this.zero(this.ss)).replace(a.mm,this.zero(this.mm)).replace(a.hh,this.zero(this.hh)).replace(a.dd,this.zero(this.dd)).replace(a.mn,this.zero(this.mn)).replace(a.yy,this.zero(this.yy))},diff:function(){var t=new Date(this.endTime),e=new Date(this.startTime);isNaN(t)||isNaN(e);var i=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),s=t.getFullYear(),o=t.getMonth()+1,a=t.getDate();return{endDate:t,startDate:e,startYears:i,endYears:s,startMonth:n,endMonth:o,endDay:a,startDay:r,day:a-r,month:o-n,year:s-i}}},methods:{init:function(){var t=this,e=this.step_times;if(clearInterval(this.timer),!(this.startTime>=this.endTime)){if(this.stepTime=this.endTime-this.startTime,this.stepTime<=0)return this.stepTime=0;this.timer=setInterval((function(){t.stepTime=t.stepTime-e,t.stepTime<=0&&(t.stepTime=0,clearInterval(t.timer))}),e)}},zero:function(t){var e=0<(e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:2)-String(t).length)?new Array(e).fill(0).join(""):"";return Number(t)<10?e+t:t}},filters:{filterZero:function(t){return Number(t)<10?"0"+t:t}},created:function(){this.init()}};i(573),i=i(37),c=Object(i.a)(c,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return t.hidden?t._e():e("div",{staticClass:"cuntdown",domProps:{innerHTML:t._s(t.pareStr)}})}),[],!1,null,"ce47b7d2",null);e.default=c.exports},611:function(t,e,i){"use strict";i(574)},622:function(t,e,i){"use strict";i.r(e),i(254),i(59);var n={name:"blindTimeText",components:{Countdown:i(579).default},props:{locale:{type:String,default:function(){return"en"}},info:{type:Object,default:function(){return{status:0,is_owner:0}}},startTime:{type:Number||String,default:0},endTime:{type:Number||String,default:0},format:{type:String,default:"{dd}天{hh}小时{mm}分钟{ss}秒"}},methods:{chountChange:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.$emit.apply(this,["change"].concat(e))},end:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.$emit.apply(this,["end"].concat(e))}}};i(611),i=i(37),n=Object(i.a)(n,(function(){var t=this,e=t.$createElement;return(e=t._self._c||e)("div",{staticClass:"block_time_content",attrs:{id:"blindTimeText"}},[0==t.info.status||1==t.info.status?e("span",{staticClass:"color_white"},[t._v(t._s(t.$t("ActivityBlindbox.ActivityBlindboxDetail.invalidTimeText"))+"   ")]):t._e(),t._v(" "),2==t.info.status?e("span",{staticClass:"color_white"},[t._v(t._s(t.$t("ActivityBlindbox.ActivityBlindboxDetail.successfullyTimeText"))+"   ")]):t._e(),t._v(" "),3==t.info.status?e("span",{staticClass:"color_white"},[t._v(t._s(t.$t("ActivityBlindbox.ActivityBlindboxDetail.expiredTimeText"))+"   ")]):t._e(),t._v(" "),0==t.info.status||1==t.info.status?e("Countdown",{staticClass:"color_red",attrs:{startTime:t.startTime,endTime:t.endTime,format:t.format}}):t._e()],1)}),[],!1,null,"0becdc74",null);e.default=n.exports},666:function(t,e,i){},770:function(t,e,i){t.exports=i.p+"img/poster_logo@2.53db9a6.png"},771:function(t,e,i){"use strict";i(666)},780:function(t,e,n){"use strict";n.r(e);var r=n(4),i=(n(58),n(50),n(74),n(593)),s=n.n(i),o=n(408),a=(i=n(596),n.n(i)),c=(i=n(622),n(111));o={name:"CrearePoster",mixins:[o.a],components:{BlindTimeText:i.default},props:{locale:{default:"en"},zIndex:{default:100},isBitKeep:{default:!1},qrcodeText:{default:""},info:{default:function(){return{status:0,is_owner:0}}},format:{default:function(){return"{dd}天{hh}小时{mm}分钟{ss}秒"}},startTime:{default:function(){return 0}},endTime:{default:function(){return 0}}},computed:{proxy_img:function(){var t=this.info.invite_image1||"";return t?"/poster".concat(t.replace("http://cdn.bitkeep.vip","").replace("https://cdn.bitkeep.vip","")):""},codeText:function(){return this.qrcodeText||location.href}},data:function(){return{showModal:!1,qrcodeUrl:"",poster:{url:""},pedding:!1}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.toDataURL(t.codeText,{errorCorrectionLevel:"H",quality:100,color:{}}).catch((function(t){return""}));case 2:t.qrcodeUrl=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{init:function(){this.showModal=!0,this.pedding&&this.showLoading(this.$t("ActivityBlindbox.toast.Generating"))},createPoster:function(){var i=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.pedding)return t.abrupt("return",i.showLoading(i.$t("ActivityBlindbox.toast.Generating")));t.next=2;break;case 2:if(i.showModal&&i.showLoading(i.$t("ActivityBlindbox.toast.Generating")),i.pedding=!0,i.poster.url="",e=i.$refs.poster,i.qrcodeUrl){t.next=12;break}return t.next=9,s.a.toDataURL(i.codeText).catch((function(t){return""}));case 9:return i.qrcodeUrl=t.sent,t.next=12,i.$nextTick();case 12:a()(e,{dpi:Object(c.a)(),width:e.offsetWidth-1,height:e.offsetHeight-1,scale:3,async:!0,scrollY:0,scrollX:0,allowTaint:!1}).then(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.poster.url=e.toDataURL("image/jpeg"),t.next=3,i.$nextTick();case 3:i.pedding=!1,i.hideLoading();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){i.pedding=!1,i.$toast.fail(JSON.stringify(t))}));case 15:case"end":return t.stop()}}),t)})))()},shareImage:function(){BitKeepInvoke.shareUrl("",this.$t("ActivityBlindbox.shared.content"),location.href,this.info.cover_image,console.log)},saveImage:function(){var t=this;this.poster.url?(this.showLoading(this.$t("ActivityBlindbox.toast.Saving")),BitKeepInvoke.saveImageFromBase64(this.poster.url,(function(e){t.hideLoading()}))):this.createPoster()}}},n(771),i=n(37),o=Object(i.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-overlay",{class:{qcodeModalwarpper:!0,hidden:!t.showModal},attrs:{show:!0}},[i("canvas",{ref:"qrcode",staticClass:"canvasTmp"}),t._v(" "),i("div",{on:{click:function(t){t.stopPropagation()}}},[i("BlindTimeText",{staticClass:"block_time",attrs:{info:t.info,startTime:t.startTime,endTime:t.endTime,format:t.format}}),t._v(" "),i("span",{staticClass:"close",attrs:{name:"close"},on:{click:function(e){t.showModal=!1}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.poster.url,expression:"!poster.url"}],ref:"poster",staticClass:"poster_wrapper",attrs:{id:"poster"}},[i("img",{staticClass:"poster_bg",attrs:{src:t.proxy_img,alt:""},on:{load:t.createPoster}}),t._v(" "),i("div",{staticClass:"commany_title"},[i("img",{staticClass:"logo",attrs:{src:n(770),alt:""}}),t._v(" "),i("div",{class:((e={content:!0})[t.locale]=!0,e)},[i("div",[t._v("\n            "+t._s(t.$t("ActivityBlindbox.ActivityBlindboxDetail.ScanBlindBox"))+"\n          ")]),t._v(" "),i("div",[t._v("\n            "+t._s(t.$t("ActivityBlindbox.ActivityBlindboxDetail.DownloadBitkeep"))+"\n          ")])])]),t._v(" "),i("img",{staticClass:"poster_qrcode",attrs:{src:t.qrcodeUrl}})]),t._v(" "),t.poster.url?i("div",{staticClass:"postershow"},[i("img",{attrs:{src:t.poster.url}})]):t._e(),t._v(" "),i("div",{staticClass:"footer"},[t.isBitKeep||t.pedding?i("div",{staticClass:"btn left",on:{click:t.saveImage}},[i("img",{attrs:{src:n(409),alt:""}}),t._v(" "),i("span",[t._v(t._s(t.$t("ActivityBlindbox.button.savePicture")))])]):i("a",{staticClass:"btn left",attrs:{href:t.poster.url,download:(new Date).getTime()+".jpeg"}},[i("img",{attrs:{src:n(409),alt:""}}),t._v(" "),i("span",[t._v(t._s(t.$t("ActivityBlindbox.button.savePicture")))])]),t._v(" "),t.isBitKeep?i("div",{staticClass:"btn",on:{click:t.shareImage}},[i("img",{attrs:{src:n(410),alt:""}}),t._v(" "),i("span",[t._v(t._s(t.$t("ActivityBlindbox.button.ShareLink")))])]):i("div",{staticClass:"btn"},[i("img",{attrs:{src:n(410),alt:""}}),t._v(" "),i("span",[t._v(t._s(t.$t("ActivityBlindbox.button.ShareLink")))])])])],1)])}),[],!1,null,"77ca09a3",null);e.default=o.exports}}]);