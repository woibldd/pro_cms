(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{435:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFaSURBVHgB7ZiNTcMwEIUvFQN0BI9QNggTMEJHgA0Im3QDYILSCdoNwgawQXiHbCm4ieNz7DiV/ElPTc9q9ck/pyREhULBn67rFPLd5aNFdn2njeXYIFvKh0Ke+oUNrZw7x9gJOdAy7JF6aMAl2FZVdaAFwL6rx8ZueokH0adMIRfM8BclxnsGdQs64vKMvCHcEl4oMZIlbuh6Izeu/RMDieDjSH1PCUl2SDCz2xizKxH8GKmf7II+SC1yxPWZZSkQieAzcrFqr3av1HJ8mIzU3/dQSe82A5EffNzrZVPIu6655MiSfLB/E02wJ/o5VHfIGYIkoxwSDzmDeLlnCwrkDCLJWYIBcgZvyWDBGXIGL8kgwQhyhsn/Cb2biSFn2OkMIprBBHKTSG63FpdjvARzyTGTgjnlGKdgbjnGJagosxzjajM1rYDVP3b+g/ecfoGTC35xpahQKPjzC6Ozn3JRmGUSAAAAAElFTkSuQmCC"},436:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFESURBVHgB7ZbRTQMxDIb/IAZgBSaADThGYAJgEsQITFBGYANggh4bsEG7QWpLeYjS5M6Ok1Mf8klWpF7sfk3qXIDBYKDHe/9GcfAydpn8G4q9V6IR1LAr1FBL5upcoRPOuSMNjxQzDFwL5nxS/C48/y89YElaGJb8prhHK5KVf4ER6XbncrttcUzY7idUsIkgryANX6igu2CQ+6G4QwVdBQtyfxS3sHR3iyYJjTEnteYgnW0cTXGT4JpcMm+/qaBULicJKbWCWrlUElJqBGvl4nxI0Qpa5ZZoeczE/yE+SqbwBjEhuSysklwKHBrJMU0EmUgSreSYZoKMVox+0ETDc5T/Kk1Ud3ENXDv+otycTW4zFoaglSFo5eIFJefgg1fchJRMaxNc7kPf0WgJOqjPfEpb3OxVZaUk+IFt4QV5x2Aw0HMCShN+nd/b/wkAAAAASUVORK5CYII="},437:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));t=n(61),t=n(43),t=n(60),t=n(86),t=n(51),t=n(87);var r=n(4),o=n(38);t=n(18),t=n(258),t=n(59),t=n(58),n=n(96);function a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return((0<arguments.length&&void 0!==e?e:"")||"").toLowerCase()}var c={computed:i(i({},Object(n.b)(["local"])),{},{locale:function(){return this.local.locale},isBitKeep:function(){return this.local.UA.isBitKeep}}),created:function(){},methods:{addCoin:function(e,t,n){var a=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.isBitKeep){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,a._addCoin(e,t,n);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2);case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()},_addCoin:function(e,t,n){return new Promise((function(r){window.BitKeepInvoke.addCoin(e,t,n,(function(e,t){return e?r(!1):t?r(!0):void r(!1)}))}))},_isCoinHas:function(e,a){return new Promise((function(t){window.BitKeepInvoke.getCoins((function(n,r){return n?t(!1):r?(r=r.find((function(t){return"".concat(s(t.chain),"_").concat(s(t.contract))=="".concat(s(e),"_").concat(s(a))})),t(r)):void t(!1)}))}))},showLoading:function(e){this.Toast=this.$toast.loading({duration:0,forbidClick:!0,message:e||""})},hideLoading:function(){this.Toast&&this.Toast.clear()}}}},581:function(e,t,n){var r=n(616);(r="string"==typeof(r=r.__esModule?r.default:r)?[[e.i,r,""]]:r).locals&&(e.exports=r.locals),(0,n(67).default)("31db6763",r,!0,{sourceMap:!1})},615:function(e,t,n){"use strict";n(581)},616:function(e,t,n){(n=n(66)(!1)).push([e.i,'.qcodeModalwarpper[data-v-2ad7cb24] {\n  width: 100vw;\n  z-index: 100;\n}\n.qcodeModalwarpper.hidden[data-v-2ad7cb24] {\n  z-index: -10 !important;\n  opacity: 0;\n}\n.qcodeModalwarpper .canvasTmp[data-v-2ad7cb24] {\n  position: absolute;\n  z-index: -1;\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n.qcodeModalwarpper .close[data-v-2ad7cb24] {\n  position: absolute;\n  z-index: 1;\n  top: 0.69rem;\n  right: 0.69rem;\n  width: 0.75rem;\n  height: 0.75rem;\n  background: url("https://cdn.bitkeep.vip/u_b_a1752190-5e77-11ec-b5be-b5b1720a6926.png") center center no-repeat;\n  background-size: 100% 100%;\n}\n.qcodeModalwarpper .postershow[data-v-2ad7cb24] {\n  width: 9.2rem;\n  height: 14.21rem;\n  max-height: calc(100vh - 3.07rem);\n  margin: 0.48rem auto 0;\n  position: relative;\n}\n.qcodeModalwarpper .postershow img[data-v-2ad7cb24] {\n  width: 100%;\n  height: 100%;\n}\n.qcodeModalwarpper .poster_wrapper[data-v-2ad7cb24] {\n  position: relative;\n  width: 9.2rem;\n  height: 14.24rem;\n  max-height: calc(100vh - 3.07rem);\n  margin: 0.48rem auto 0;\n  position: relative;\n}\n.qcodeModalwarpper .poster_wrapper .poster_bg[data-v-2ad7cb24] {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n.qcodeModalwarpper .poster_wrapper .imgText[data-v-2ad7cb24] {\n  position: absolute;\n  top: 0.53rem;\n  left: 0.53rem;\n  width: 7.33rem;\n  font-size: 0.69rem;\n  color: #0E0E0E;\n  font-weight: bold;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title[data-v-2ad7cb24] {\n  left: 0.43rem;\n  bottom: 0.59rem;\n  position: absolute;\n  font-size: 0.32rem;\n  line-height: 0.48rem;\n  color: #0E0E0E;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title .logo[data-v-2ad7cb24] {\n  width: 2.4rem;\n  height: 0.64rem;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title .title[data-v-2ad7cb24] {\n  margin-top: 0.27rem;\n}\n.qcodeModalwarpper .poster_wrapper .commany_title .content[data-v-2ad7cb24] {\n  width: 4.4rem;\n  margin-left: 0.13rem;\n  word-wrap: break-word;\n  line-height: 0.37rem;\n}\n.qcodeModalwarpper .poster_wrapper .poster_qrcode[data-v-2ad7cb24] {\n  position: absolute;\n  right: 0.53rem;\n  bottom: 0.53rem;\n  width: 2.13rem;\n  height: 2.13rem;\n  box-shadow: inset 0 0.03rem 0 rgba(255,255,255,0.4),inset 0 -0.03rem 0 rgba(255,255,255,0.15);\n  border-radius: 0.21rem;\n}\n.qcodeModalwarpper .footer[data-v-2ad7cb24] {\n  margin-top: 0.4rem;\n  display: flex;\n  justify-content: center;\n}\n.qcodeModalwarpper .footer .left[data-v-2ad7cb24] {\n  margin-right: 0.51rem;\n}\n.qcodeModalwarpper .footer .btn[data-v-2ad7cb24] {\n  display: flex;\n  width: 4.32rem;\n  height: 1.33rem;\n  font-size: 0.43rem;\n  background: #7524f9;\n  border-radius: 2.67rem;\n  font-weight: 600;\n  color: #ffffff;\n  justify-content: center;\n  align-items: center;\n}\n.qcodeModalwarpper .footer .btn img[data-v-2ad7cb24] {\n  width: 0.53rem;\n  height: 0.53rem;\n  margin-right: 0.16rem;\n}',""]),e.exports=n},727:function(e,t,n){"use strict";n.r(t);var a=n(4),r=(n(58),n(50),n(76),n(611)),o=n.n(r),i=n(437),s=(r=n(614),n.n(r)),c=n(175);r={name:"CrearePoster",mixins:[i.a],props:{locale:{default:"en"},zIndex:{default:100},isBitKeep:{default:!1},userInfo:{default:""},info:{default:function(){return{status:0,is_owner:0}}}},computed:{proxy_img:function(){return"/poster".concat("https://cdn.bitkeep.vip/u_b_c474a860-a020-11ec-b054-8b7edc051038.jpeg".replace("https://cdn.bitkeep.vip","").replace("https://cdn.bitkeep.vip",""))},codeText:function(){return location.href+"/detail?token="+this.userInfo}},data:function(){return{showModal:!1,qrcodeUrl:"",poster:{url:""},pedding:!1}},mounted:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.toDataURL(e.codeText,{errorCorrectionLevel:"H",quality:100}).catch((function(e){return""}));case 2:e.qrcodeUrl=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{init:function(){this.showModal=!0,this.pedding&&this.showLoading(this.$t("ActivityBlindbox.toast.Generating"))},createPoster:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.pedding)return t.abrupt("return",e.showLoading(e.$t("ActivityBlindbox.toast.Generating")));t.next=2;break;case 2:if(e.showModal&&e.showLoading(e.$t("ActivityBlindbox.toast.Generating")),e.pedding=!0,e.poster.url="",n=e.$refs.poster,e.qrcodeUrl){t.next=12;break}return t.next=9,o.a.toDataURL(e.codeText).catch((function(e){return""}));case 9:return e.qrcodeUrl=t.sent,t.next=12,e.$nextTick();case 12:s()(n,{dpi:Object(c.a)(),width:n.offsetWidth-1,height:n.offsetHeight-1,scale:3,async:!0,scrollY:0,scrollX:0,allowTaint:!1}).then(function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.poster.url=n.toDataURL("image/jpeg"),t.next=3,e.$nextTick();case 3:e.pedding=!1,e.hideLoading();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.pedding=!1,e.$toast.fail(JSON.stringify(t))}));case 15:case"end":return t.stop()}}),t)})))()},shareImage:function(){BitKeepInvoke.shareUrl(this.$t("blindboxInvite.inviteTitle"),this.$t("ActivityBlindbox.shared.content"),location.href+"/detail?token="+this.userInfo,this.info.cover_image,console.log)},saveImage:function(){var e=this;this.poster.url?(this.showLoading(this.$t("ActivityBlindbox.toast.Saving")),BitKeepInvoke.saveImageFromBase64(this.poster.url,(function(t){e.hideLoading()}))):this.createPoster()}}},n(615),i=n(37),r=Object(i.a)(r,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-overlay",{class:{qcodeModalwarpper:!0,hidden:!e.showModal},attrs:{show:!0}},[r("canvas",{ref:"qrcode",staticClass:"canvasTmp"}),e._v(" "),r("div",{staticClass:"overlayBox",on:{click:function(e){e.stopPropagation()}}},[r("span",{staticClass:"close",attrs:{name:"close"},on:{click:function(t){e.showModal=!1}}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.poster.url,expression:"!poster.url"}],ref:"poster",staticClass:"poster_wrapper",attrs:{id:"poster"}},[r("img",{staticClass:"poster_bg",attrs:{src:e.proxy_img,alt:""},on:{load:e.createPoster}}),e._v(" "),r("div",{staticClass:"commany_title"},[r("div",{class:((t={content:!0})[e.locale]=!0,t)},[r("div",[e._v("\n            "+e._s(e.$t("blindboxInvite.Poster"))+"\n          ")]),e._v(" "),r("div",[e._v("\n            "+e._s(e.$t("blindboxInvite.downReward"))+"\n          ")])])]),e._v(" "),r("div",{staticClass:"imgText"},[e._v(e._s(e.$t("blindboxInvite.imgText")))]),e._v(" "),r("img",{staticClass:"poster_qrcode",attrs:{src:e.qrcodeUrl}})]),e._v(" "),e.poster.url?r("div",{staticClass:"postershow"},[r("img",{attrs:{src:e.poster.url}})]):e._e(),e._v(" "),r("div",{staticClass:"footer"},[e.isBitKeep||e.pedding?r("div",{staticClass:"btn left",on:{click:e.saveImage}},[r("img",{attrs:{src:n(435),alt:""}}),e._v(" "),r("span",[e._v(e._s(e.$t("blindboxInvite.savePicture")))])]):r("a",{staticClass:"btn left",attrs:{href:e.poster.url,download:(new Date).getTime()+".jpeg"}},[r("img",{attrs:{src:n(435),alt:""}}),e._v(" "),r("span",[e._v(e._s(e.$t("blindboxInvite.savePicture")))])]),e._v(" "),e.isBitKeep?r("div",{staticClass:"btn",on:{click:e.shareImage}},[r("img",{attrs:{src:n(436),alt:""}}),e._v(" "),r("span",[e._v(e._s(e.$t("blindboxInvite.ShareLink")))])]):r("div",{staticClass:"btn"},[r("img",{attrs:{src:n(436),alt:""}}),e._v(" "),r("span",[e._v(e._s(e.$t("blindboxInvite.ShareLink")))])])])])])}),[],!1,null,"2ad7cb24",null);t.default=r.exports}}]);