{"version":3,"file":"pages/article/detail/_id.js","sources":["webpack:///./pages/article/detail/_id.vue?d2e1","webpack:///./pages/article/detail/_id.vue?cdeb","webpack:///./pages/article/detail/_id.vue?00ad","webpack:///./pages/article/detail/_id.vue?a775","webpack:///./api/server.js","webpack:///./pages/article/detail/_id.vue","webpack:///./pages/article/detail/_id.vue?a9c6","webpack:///./pages/article/detail/_id.vue?0295"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&id=9af5ea74&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"3349281e\", content, true, context)\n};","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-1-3!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&id=9af5ea74&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#article[data-v-9af5ea74] {\\n  min-height: 100vh;\\n  margin: 0 auto;\\n  padding: 0.4rem 0.43rem;\\n  width: 100vw;\\n  box-sizing: border-box;\\n}\\n#article *[data-v-9af5ea74] {\\n  max-width: 100%;\\n  box-sizing: border-box;\\n}\\n#article .title[data-v-9af5ea74] {\\n  font-style: normal;\\n  font-weight: 500;\\n  font-size: 0.53rem;\\n  line-height: 0.75rem;\\n}\\n#article .sub[data-v-9af5ea74] {\\n  margin: 0.4rem 0;\\n  font-family: PingFang SC;\\n  font-style: normal;\\n  font-weight: normal;\\n  font-size: 0.32rem;\\n  line-height: 0.32rem;\\n  text-align: justify;\\n  color: #6d707d;\\n}\\n#article .username[data-v-9af5ea74] {\\n  padding-right: 0.27rem;\\n}\\n#article .content[data-v-9af5ea74] {\\n  word-break: break-all;\\n}\\n#article .noData[data-v-9af5ea74] {\\n  color: #999;\\n  line-height: 60vh;\\n  font-size: 0.8rem;\\n  text-align: center;\\n}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"article\"}},[_vm._ssrNode(\"<div class=\\\"header\\\" data-v-9af5ea74><div class=\\\"title\\\" data-v-9af5ea74>\"+_vm._ssrEscape(\"\\n      \"+_vm._s(_vm.info.title)+\"\\n    \")+\"</div> <div class=\\\"sub\\\" data-v-9af5ea74><span data-v-9af5ea74>\"+_vm._ssrEscape(_vm._s(_vm.source)+\":\")+\"</span> <span class=\\\"username\\\" data-v-9af5ea74>\"+_vm._ssrEscape(_vm._s(_vm.info.user_name))+\"</span> <span data-v-9af5ea74>\"+_vm._ssrEscape(_vm._s(_vm._f(\"filterDate\")(_vm.info.create_time)))+\"</span></div></div> \"+((_vm.info.content)?(\"<div class=\\\"content\\\" data-v-9af5ea74>\"+(_vm._s(_vm.info.content))+\"</div>\"):(\"<div class=\\\"noData\\\" data-v-9af5ea74>\\n       该文章不存在\\n  </div>\"))+\" \"),_c('van-image-preview',{attrs:{\"close-on-popstate\":\"\",\"closeable\":\"\",\"start-position\":_vm.current,\"images\":_vm.images},on:{\"change\":_vm.onChange,\"onclose\":_vm.onclose},model:{value:(_vm.showPreview),callback:function ($$v) {_vm.showPreview=$$v},expression:\"showPreview\"}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// import LRU from \"lru-cache\";\n// let CACHED = new LRU({\n//   max: 100, // 缓存队列长度\n//   maxAge: 1000 * 60 * 24 // 缓存时间 一个小时\n// });\nconst LANG = null\nfunction createURL(url, params) {\n  url += \"?\";\n  for (var item in params) {\n    url += `${item}=${params[item]}&`;\n  }\n  return url.substr(0, url.length - 1);\n}\nexport default {\n  articleDetail(ctx, data = {}) {\n    const { $axios,\n      app,\n      store,\n      route,\n      params,\n      query,\n      env,\n      isDev,\n      isHMR,\n      redirect,\n      error,\n      $config\n     } = ctx\n   \n   \n    let url = createURL(`/article/detail`, params);\n    // console.log(\"请求参数：\", JSON.stringify($config),JSON.stringify(params),JSON.stringify(query))\n    return $axios\n      .$get(url)\n      .then(result => {\n        // console.log(\"响应：\",result)\n        return result;\n      })\n      .catch(err => {\n        return { status: 1, msg: \"请求失败\" };\n      });\n  },\n\n\n  articleLang(ctx, data = {}) {\n    const { \n      $axios,\n      params,\n      query,\n      $config\n     } = ctx\n   \n    // console.log(\"请求参数：\", JSON.stringify($config),JSON.stringify(params),JSON.stringify(query))\n    let url = createURL(`/article/lang`, params);\n    return $axios\n      .$get(url)\n      .then(result => {\n        // console.log(\"响应：\",result)\n        return result;\n      })\n      .catch(err => {\n        return { status: 1, msg: \"请求失败\" };\n      });\n  },\n\n};\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport API from \"@/api/server.js\";\nexport default {\n  name: \"Detail\",\n  async asyncData(ctx) {\n   const [langR, detailR] =  await Promise.all([\n      API.articleLang(ctx),\n      API.articleDetail(ctx)\n    ])\n    const { status, data } = detailR;\n    const info =\n      String(data) == \"null\" || !data\n        ? {\n            title: \"该文章不存在\",\n          }\n        : data;\n    const { languages, means} =  langR.status ==0 ? langR.data : { languages:[],means:[] }\n    if(detailR.status == 0){\n        ctx.app.head.title = info.title;\n    }\n    return {\n        info,\n        languages,\n        means\n    };\n  },\n  computed:{\n      source(){\n        const { list } = this.languages.find(v=>v.zh=='来源') || {list:[]}\n        const { value }  = list.find(v=>v.key ==this.info.language) || {\n          key:\"en\",\n          value:\"source\"\n        }\n        return value\n      }\n  },\n  data() {\n    return {\n      showPreview: false,\n      images: [],\n      current: 0,\n      languages:[],\n      means:[],\n      info: {\n\n      }\n    };\n  },\n  async mounted() {\n    await this.$nextTick();\n    const self = this;\n    const imgs = document.getElementById(\"article\").getElementsByTagName(\"img\");\n    this.images = Array.from(imgs)\n      .map((v, index) => {\n        v.setAttribute(\"show_index\", index);\n        v.onclick = function () {\n          self.showPreview = true;\n          self.current = Number(this.getAttribute(\"show_index\") || 0);\n        };\n        return v.getAttribute(\"src\") || v.getAttribute(\"href\");\n      })\n      .filter((v) => v);\n  },\n  methods: {\n    onChange() {},\n    onclose() {\n      console.log(arguments);\n    },\n  },\n\n  filters: {\n    filterDate(create_time) {\n      function isZero(m) {\n        return m < 10 ? \"0\" + m : m;\n      }\n      //时间戳是整数，否则要parseInt转换\n      var time = new Date(create_time|| new Date().getTime()); // 需要使用Date格式进行日期转化，若是时间戳、字符串时间，需要通过new Date(..)转化\n      var y = time.getFullYear();\n      var m = time.getMonth() + 1;\n      var d = time.getDate();\n      var h = time.getHours();\n      var mm = time.getMinutes();\n      return (\n        y +\n        \"—\" +\n        isZero(m) +\n        \"-\" +\n        isZero(d) +\n        \" \" +\n        isZero(h) +\n        \":\" +\n        isZero(mm)\n      );\n    },\n  },\n};\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=9af5ea74&scoped=true&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./_id.vue?vue&type=style&index=0&id=9af5ea74&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"9af5ea74\",\n  \"ccfb2304\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAeA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAOA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAnDA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAIA;AAAA;AAAA;AAAA;AACA;AAGA;AADA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;AATA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAUA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAWA;AACA;AAxBA;AApEA;;AC9BA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}