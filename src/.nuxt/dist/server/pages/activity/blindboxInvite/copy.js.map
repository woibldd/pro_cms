{"version":3,"file":"pages/activity/blindboxInvite/copy.js","sources":["webpack:///./pages/activity/blindboxInvite/copy.js"],"sourcesContent":["import { Toast } from 'vant';\r\nconst vCopy = { // 名字爱取啥取啥\r\n /*\r\n  bind 钩子函数，第一次绑定时调用，可以在这里做初始化设置\r\n  el: 作用的 dom 对象\r\n  value: 传给指令的值，也就是我们要 copy 的值\r\n */\r\n bind(el, { value }) {\r\n  el.$value = value; // 用一个全局属性来存传进来的值，因为这个值在别的钩子函数里还会用到\r\n  el.handler = () => {\r\n   if (!el.$value) {\r\n   // 值为空的时候，给出提示，我这里的提示是用的 vant 的提示\r\n   Toast.fail('Some error occurred');\r\n    return;\r\n   }\r\n   // 动态创建 textarea 标签\r\n   const textarea = document.createElement('textarea');\r\n   // 将该 textarea 设为 readonly 防止 iOS 下自动唤起键盘，同时将 textarea 移出可视区域\r\n   textarea.readOnly = 'readonly';\r\n   textarea.style.position = 'absolute';\r\n   textarea.style.left = '-9999px';\r\n   // 将要 copy 的值赋给 textarea 标签的 value 属性\r\n   textarea.value = el.$value;\r\n   // 将 textarea 插入到 body 中\r\n   document.body.appendChild(textarea);\r\n   // 选中值并复制\r\n   textarea.select();\r\n   textarea.setSelectionRange(0, textarea.value.length);\r\n   const result = document.execCommand('Copy');\r\n   if (result) {\r\n    Toast('Copied');\r\n   }\r\n   document.body.removeChild(textarea);\r\n  };\r\n  // 绑定点击事件，就是所谓的一键 copy\r\n  el.addEventListener('click', el.handler);\r\n },\r\n // 当传进来的值更新的时候触发\r\n componentUpdated(el, { value }) {\r\n  el.$value = value;\r\n },\r\n // 指令与元素解绑的时候，移除事件绑定\r\n unbind(el) {\r\n  el.removeEventListener('click', el.handler);\r\n },\r\n};\r\nexport default vCopy;\r\n\r\n"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AA5CA;AA6CA;;;;A","sourceRoot":""}