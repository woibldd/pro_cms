<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<style lang="">
  canvas {

    width: 800px;
    height: 400px;
  }

</style>

<body>
  <canvas id="canvas"></canvas>
  <script>
    var canvas = document.getElementById("canvas"), //获取canvas
      ctx = canvas.getContext("2d"), //对应的CanvasRenderingContext2D对象(画笔)
      img = new Image(), //创建新的图片对象
      base64 = ''; //base64 
      // img.crossOrigin = '';
      img.src = 'http://cdn.bitkeep.vip/u_b_c1f944e0-db1f-11eb-9ad0-ddefb611a80f.png';
    // img.setAttribute("crossOrigin", 'Anonymous')
      img.onload = function () { //图片加载完，再draw 和 toDataURL
      ctx.drawImage(img, 0, 0);
      var ext = img.src.substring(img.src.lastIndexOf('.') + 1).toLowerCase()
      var dataURL = canvas.toDataURL('image/' + ext)
      console.log(dataURL)
      // canvas.toBlob((blob) => {
      //   console.log({blob})
      // })


      // base64 = canvas.toDataURL("image/png");
      // console.log({base64})
      // http://cdn.bitkeep.vip/u_b_c1f944e0-db1f-11eb-9ad0-ddefb611a80f.png'
      // canvas.toB
      // $.get("http://cdn.bitkeep.vip/u_b_c1f944e0-db1f-11eb-9ad0-ddefb611a80f.png", function (result) {
      //   console.log(result)
      // });
    };

  </script>
</body>

</html>
